{
  "name": "obsidian-tracker",
  "description": "Project tracking and bug logging with Obsidian integration. Auto-tracks sessions via hooks.",
  "version": "2.1.1",
  "mcpServers": "./.mcp.json",
  "author": {
    "name": "Ivan Lutsenko",
    "email": "ivan@lutsenko.com",
    "url": "https://github.com/IvanLutsenko"
  },
  "keywords": ["obsidian", "projects", "tracking", "bugs", "documentation", "hooks", "auto-sync"],
  "license": "MIT",
  "commands": [
    "./commands/projects.md",
    "./commands/project-new.md",
    "./commands/project-bug.md",
    "./commands/session-log.md",
    "./commands/track-start.md",
    "./commands/track-stop.md",
    "./commands/track-status.md"
  ],
  "hooks": {
    "PreCompact": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Check if .claude/obsidian-tracking.json exists. If it does, read it and include this info in your response so it survives compaction: 'OBSIDIAN TRACKING ACTIVE: Project={project}, Goal={goal}, Actions={actions.length}'. If file doesn't exist, do nothing."
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "matcher": "clear",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Check if .claude/obsidian-tracking.json exists. If yes: 1) Read the tracking data, 2) Call mcp__plugin_obsidian_tracker_obsidian__addSession with project, goal, actions, results='Session completed via /clear', 3) Delete .claude/obsidian-tracking.json, 4) Notify user: 'üìù Session saved to Obsidian'. If file doesn't exist, do nothing silently."
          }
        ]
      },
      {
        "matcher": "compact|resume",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Check if .claude/obsidian-tracking.json exists. If yes, read it and notify: 'üîî Obsidian Tracking active: {project} - {goal}'. If no, do nothing silently."
          }
        ]
      },
      {
        "matcher": "startup",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Auto-detect Obsidian project: 1) Call mcp__obsidian-tracker__listProjects to get all projects, 2) Check if current working directory matches any project's local_path (from frontmatter), 3) If match found AND .claude/obsidian-tracking.json doesn't exist: create .claude/obsidian-tracking.json with {project, goal:'', actions:[], startedAt:now} and notify 'üîî Auto-tracking: {project}', 4) If .claude/obsidian-tracking.json already exists, notify 'üîî Tracking active: {project}', 5) If no match, do nothing silently."
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "TodoWrite",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "If .claude/obsidian-tracking.json exists: Read the tool input, find todos with status='completed', add them as '‚úÖ {content}' to the actions array in the tracking file. Work silently, don't notify user."
          }
        ]
      }
    ]
  }
}
